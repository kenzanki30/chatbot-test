<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>Xenia ChatBot Test</title>
</head>
<body>
  <h1>Trigger Xenia ChatBot Scenario</h1>
  <p>
    <a href="?chat=xenia">Open Xenia</a> |
    <a href="?chat=xeniacloud">Open Xenia Cloud</a>
  </p>

  <script>
    const params = new URLSearchParams(window.location.search);
    const chat = params.get("chat");

    window.__ow = window.__ow || {};
    window.__ow.organizationId = "6d6bb40e-d40c-4cb1-b3bc-edab5cb626b9";
    window.__ow.template_id = "31bc2425-c28e-45fe-926e-6cfb8fed480a";
    window.__ow.integration_name = "manual_settings";
    window.__ow.product_name = "chatbot";

    // Wait for widget to initialize before calling methods
    window.OpenWidget = window.OpenWidget || {
      _q: [],
      on: function () {
        this._q.push(["on", [...arguments]]);
      },
      call: function () {
        this._q.push(["call", [...arguments]]);
      }
    };

    // When widget is ready, set sessionData and open the chat
    window.OpenWidget.on("ready", function () {
      if (chat === "xenia" || chat === "xeniacloud") {
        window.OpenWidget.call("setSessionData", {
          chat: chat,
          source: "github"
        });

        window.OpenWidget.call("open");
      }
    });

    // Load the widget script
    (function (n, t, c) {
      var e = {
        _q: [],
        _h: null,
        _v: "2.0",
        on: function () {
          e._q.push(["on", c.call(arguments)]);
        },
        call: function () {
          e._q.push(["call", c.call(arguments)]);
        },
        init: function () {
          var n = t.createElement("script");
          n.async = true;
          n.type = "text/javascript";
          n.src = "https://cdn.openwidget.com/openwidget.js";
          t.head.appendChild(n);
        }
      };
      !n.__ow.asyncInit && e.init();
      n.OpenWidget = n.OpenWidget || e;
    })(window, document, [].slice);
  </script>

  <noscript>
    Please enable JavaScript to use our chatbot powered by <a href="https://chatbot.com" target="_blank">ChatBot</a>
  </noscript>
</body>
</html>
